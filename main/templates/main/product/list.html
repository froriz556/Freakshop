{% extends "main/base.html" %}
{% load static %}

{% block title %}FreakShop - Товары{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Наши товары</h2>
    <form method="get" class="d-flex">
        <select name="sort" class="form-select">
            <option value="">Сортировка</option>
            <option value="price_asc">Цена: по возрастанию</option>
            <option value="price_desc">Цена: по убыванию</option>
            <option value="name_asc">Название: А→Я</option>
            <option value="name_desc">Название: Я→А</option>
        </select>
        <button type="submit" class="btn btn-freak ms-2">Применить</button>
    </form>
</div>

<div class="row">
    {% for product in products %}
    <div class="col-md-3">
        <div class="product-card float-animation">
            <img src="{{ product.image.url }}" alt="{{ product.name }}" class="img-fluid">
            <h5 class="mt-2">{{ product.name }}</h5>
            <p class="fw-bold">{{ product.price }} ₽</p>
            <a href="{% url 'main:product_detail' product.id product.slug %}" class="btn btn-freak w-100">Подробнее</a>
        </div>
    </div>
    {% empty %}
    <p>Товары не найдены.</p>
    {% endfor %}
</div>

{% endblock %}

{% block extra_head %}
<style>
    /* -------------------------
    Плавание карточек (хаотичное float)
    ------------------------- */
    @keyframes float1 {
        0% { transform: translate(0,0) rotate(0deg); }
        25% { transform: translate(3px,-2px) rotate(1deg); }
        50% { transform: translate(-2px,2px) rotate(-1deg); }
        75% { transform: translate(2px,-1px) rotate(0.5deg); }
        100% { transform: translate(0,0) rotate(0deg); }
    }

    @keyframes float2 {
        0% { transform: translate(0,0) rotate(0deg); }
        25% { transform: translate(-3px,2px) rotate(-0.5deg); }
        50% { transform: translate(2px,-2px) rotate(1deg); }
        75% { transform: translate(-1px,1px) rotate(-1deg); }
        100% { transform: translate(0,0) rotate(0deg); }
    }

    .float-animation {
        animation: float1 6s ease-in-out infinite;
    }

    /* Чередуем анимации для хаоса */
    .row .col-md-3:nth-child(2n) .float-animation {
        animation: float2 5s ease-in-out infinite;
    }

</style>
{% endblock %}
